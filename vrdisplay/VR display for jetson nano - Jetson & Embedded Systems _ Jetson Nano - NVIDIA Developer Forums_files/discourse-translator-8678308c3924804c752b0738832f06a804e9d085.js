define("discourse/plugins/discourse-translator/discourse/initializers/extend-for-translate-button",["exports","I18n","discourse/lib/ajax-error","discourse/lib/plugin-api","discourse/lib/ajax"],function(t,r,s,e,i){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,s=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw s}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function o(t){var a=t.container.lookup("site-settings:main");t.getCurrentUser()&&a.translator_enabled&&(t.includePostAttributes("can_translate","translated_text","detected_lang"),t.decorateWidget("post-menu:before",function(t){if(t.state.isTranslated){if(t.state.isTranslating)return t.h("div.spinner.small");var e=t.attrs.detected_lang,n=a.translator;return t.h("div.post-translation",[t.h("hr"),t.h("div.post-attribution",r.default.t("translator.translated_from",{language:e,translator:n})),t.cooked(t.attrs.translated_text)])}}),t.attachWidgetAction("post-menu","translate",function(){var e=this.state;e.isTranslated=!0,e.isTranslating=!0,this.scheduleRerender();var n,t=this.findAncestorModel();if(t)return n=t,(0,i.ajax)("/translator/translate",{type:"POST",data:{post_id:n.get("id")}}).then(function(t){n.setProperties({translated_text:t.translation,detected_lang:t.detected_lang})}).catch(function(t){(0,s.popupAjaxError)(t),e.isTranslating=!1,e.isTranslated=!1}).finally(function(){return e.isTranslating=!1})}),t.attachWidgetAction("post-menu","hideTranslation",function(){this.state.isTranslated=!1;var t=this.findAncestorModel();t&&t.set("translated_text","")}),t.addPostMenuButton("translate",function(t,e){if(t.can_translate){t=n(e.isTranslated?["hideTranslation","translator.hide_translation"]:["translate","translator.view_translation"],2);return{action:t[0],title:t[1],icon:"globe",position:"first",className:e.isTranslated?"translated":null}}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l={name:"extend-for-translate-button",initialize:function(){(0,e.withPluginApi)("0.1",o)}};t.default=l}),Ember.TEMPLATES["javascripts/connectors/post-after-cooked/translate"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[28,"translated-post",null,[["post"],[[23,0,[]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/post-after-cooked/translate"}}),Ember.TEMPLATES["javascripts/components/translated-post"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[24,["post","translated_text"]]],null,{"statements":[[4,"conditional-loading-spinner",null,[["condition","size"],[[24,["loading"]],"small"]],{"statements":[[0,"  "],[7,"div",true],[10,"class","post-translation"],[8],[0,"\\n    "],[7,"hr",true],[8],[9],[0,"\\n\\n    "],[7,"div",true],[10,"class","post-attribution"],[8],[0,"\\n      "],[1,[28,"i18n",["translator.translated_from"],[["language","translator"],[[24,["post","detected_lang"]],[24,["siteSettings","translator"]]]]],false],[0,"\\n    "],[9],[0,"\\n\\n    "],[1,[24,["post","translated_text"]],true],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/translated-post"}}),define("discourse/plugins/discourse-translator/discourse/components/translated-post",["exports","discourse-common/utils/decorators"],function(t,e){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,s,i,o,l,e=Ember.Component.extend((n=(0,e.default)("post.translated_text"),a=e={loading:function(t){return!0===t}},r="loading",s=[n],i=Object.getOwnPropertyDescriptor(e,"loading"),o=e,l={},Object.keys(i).forEach(function(t){l[t]=i[t]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=s.slice().reverse().reduce(function(t,e){return e(a,r,t)||t},l),o&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(o):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(a,r,l),l=null),e));t.default=e});
//# sourceMappingURL=https://sjc6.discourse-cdn.com/nvidia/assets/plugins/discourse-translator-8678308c3924804c752b0738832f06a804e9d085604790eddafdc2326ae6b48d.js.map