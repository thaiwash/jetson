define("discourse/plugins/discourse-canned-replies/initializers/add-canned-replies-ui-builder",["exports","discourse/lib/plugin-api","discourse/lib/show-modal"],function(e,t,n){"use strict";function l(e){e.modifyClass("controller:composer",{actions:{showCannedRepliesButton:function(){this.site.mobileView?(0,n.default)("canned-replies").set("composerModel",this.model):(this.appEvents.trigger("composer:show-preview"),this.appEvents.trigger("canned-replies:show"))}}}),e.addToolbarPopupMenuOptionsCallback(function(){return{id:"canned_replies_button",icon:"far-clipboard",action:"showCannedRepliesButton",label:"canned_replies.composer_button_text"}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"add-canned-replies-ui-builder",initialize:function(e){var n=e.lookup("site-settings:main"),e=e.lookup("current-user:main");n.canned_replies_enabled&&e&&e.can_use_canned_replies&&(0,t.withPluginApi)("0.5",l)}};e.default=i}),Ember.TEMPLATES["javascripts/modal/new-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["canned_replies.add.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[28,"canned-replies-form",null,[["title","content"],[[24,["newTitle"]],[24,["newContent"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div",true],[10,"class","modal-footer canned-replies-footer"],[8],[0,"\\n  "],[1,[28,"d-button",null,[["class","action","label","disabled"],["btn-primary new-reply-save-btn",[28,"action",[[23,0,[]],"save"],null],"save",[24,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[7,"a",false],[3,"action",[[23,0,[]],"cancel"]],[8],[1,[28,"i18n",["cancel"],null],false],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/modal/new-reply"}}),Ember.TEMPLATES["javascripts/modal/edit-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["canned_replies.edit.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[28,"canned-replies-form",null,[["title","content"],[[24,["replyTitle"]],[24,["replyContent"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div",true],[10,"class","modal-footer canned-replies-footer"],[8],[0,"\\n  "],[1,[28,"d-button",null,[["class","action","label","disabled"],["btn-primary edit-reply-save-btn",[28,"action",[[23,0,[]],"save"],null],[24,["savingLabel"]],[24,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[7,"a",false],[3,"action",[[23,0,[]],"cancel"]],[8],[1,[28,"i18n",["cancel"],null],false],[9],[0,"\\n\\n  "],[1,[28,"d-button",null,[["class","action","icon","disabled"],["btn-danger pull-right",[28,"action",[[23,0,[]],"remove"],null],"trash-alt",[24,["saving"]]]]],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/modal/edit-reply"}}),Ember.TEMPLATES["javascripts/modal/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class","style"],["canned_replies.insert.modal_title","canned-replies-modal","overflow: visible"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[24,["loadingReplies"]]]],{"statements":[[0,"    "],[7,"div",true],[10,"class","details"],[8],[0,"\\n      "],[7,"div",true],[10,"class","reply-selector"],[8],[0,"\\n        "],[7,"div",true],[10,"class","selector"],[8],[0,"\\n          "],[1,[28,"combo-box",null,[["id","valueAttribute","value","nameProperty","content","none"],["canned-replies-combobox","id",[24,["selectedReplyId"]],"title",[24,["replies"]],"canned_replies.insert.choose"]]],false],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n\\n"],[4,"if",[[24,["selectedReply"]]],null,{"statements":[[0,"        "],[7,"div",true],[10,"class","content"],[8],[0,"\\n          "],[7,"div",true],[8],[1,[28,"cook-text",[[24,["selectedReply","content"]]],null],true],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[7,"div",true],[10,"class","modal-footer"],[8],[0,"\\n  "],[1,[28,"d-button",null,[["class","action","icon","label"],["pull-left canned-replies-new",[28,"action",[[23,0,[]],"newReply"],null],"plus","canned_replies.insert.new_button"]]],false],[0,"\\n\\n"],[4,"if",[[24,["selectedReply"]]],null,{"statements":[[0,"    "],[1,[28,"d-button",null,[["class","action","icon","label"],["pull-left canned-replies-edit",[28,"action",[[23,0,[]],"editReply"],null],"pencil-alt","canned_replies.insert.edit_button"]]],false],[0,"\\n\\n    "],[1,[28,"d-button",null,[["class","action","icon","label"],["btn-primary pull-right canned-replies-apply",[28,"action",[[23,0,[]],"apply"],null],"far-clipboard","canned_replies.insert.insert_button"]]],false],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/modal/canned-replies"}}),Ember.TEMPLATES["javascripts/connectors/editor-preview/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["r"],"statements":[[4,"if",[[24,["isVisible"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","d-editor-preview"],[8],[0,"\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[24,["loadingReplies"]]]],{"statements":[[4,"if",[[24,["canEdit"]]],null,{"statements":[[0,"        "],[1,[28,"d-button",null,[["class","action","icon","label"],["canned-replies-new",[28,"action",[[23,0,[]],"newReply"],null],"plus","canned_replies.insert.new_button"]]],false],[0,"\\n        "],[1,[28,"text-field",null,[["class","value","placeholder"],["canned-replies-filter",[24,["listFilter"]],[28,"i18n",["canned_replies.filter_hint"],null]]]],false],[0,"\\n        "],[7,"a",false],[12,"class","close pull-right"],[3,"action",[[23,0,[]],"hide"]],[8],[1,[28,"d-icon",["times"],null],false],[9],[0,"\\n\\n        "],[7,"hr",true],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"each",[[24,["filteredReplies"]]],null,{"statements":[[0,"        "],[1,[28,"canned-reply",null,[["reply"],[[23,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null],[0,"  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/connectors/editor-preview/canned-replies"}}),Ember.TEMPLATES["javascripts/components/canned-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","canned-reply"],[11,"id",[29,["canned-reply-",[24,["reply","id"]]]]],[8],[0,"\\n  "],[7,"div",false],[12,"class","canned-reply-title"],[3,"action",[[23,0,[]],"toggle"]],[8],[0,"\\n    "],[1,[28,"d-button",null,[["class","action","icon"],["canned-replies-apply",[28,"action",[[23,0,[]],"apply"],null],"far-clipboard"]]],false],[0,"\\n\\n"],[4,"if",[[24,["canEdit"]]],null,{"statements":[[0,"      "],[1,[28,"d-button",null,[["class","action","icon"],["canned-replies-edit",[28,"action",[[23,0,[]],"editReply"],null],"pencil-alt"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[7,"b",true],[8],[1,[24,["reply","title"]],false],[9],[0,"\\n  "],[9],[0,"\\n\\n"],[4,"if",[[24,["isOpen"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","canned-replies-content"],[8],[0,"\\n      "],[1,[28,"cook-text",[[24,["reply","content"]]],null],true],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/canned-reply"}}),Ember.TEMPLATES["javascripts/components/canned-replies-form"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"form",true],[8],[0,"\\n  "],[7,"div",true],[8],[0,"\\n    "],[7,"label",true],[8],[7,"strong",true],[8],[1,[28,"i18n",["canned_replies.title.name"],null],false],[9],[9],[0,"\\n    "],[1,[28,"input",null,[["class","value"],["canned-replies-form-title-input",[24,["title"]]]]],false],[0,"\\n  "],[9],[0,"\\n\\n  "],[7,"div",true],[8],[0,"\\n    "],[7,"label",true],[8],[7,"strong",true],[8],[1,[28,"i18n",["canned_replies.content.name"],null],false],[9],[9],[0,"\\n    "],[1,[28,"d-editor",null,[["class","value"],["canned-replies-form-content-input",[24,["content"]]]]],false],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/components/canned-replies-form"}}),define("discourse/plugins/discourse-canned-replies/connectors/editor-preview/canned-replies",["exports","discourse/lib/show-modal","discourse/lib/ajax","discourse/lib/ajax-error","discourse-common/lib/get-owner"],function(e,n,t,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={setupComponent:function(e,t){var n=this.get("currentUser"),l=this.get("siteSettings.canned_replies_everyone_enabled")&&this.get("siteSettings.canned_replies_everyone_can_edit"),n=this.get("siteSettings.canned_replies_enabled")&&n&&n.can_edit_canned_replies,l=n||l;this.set("canEdit",l),t.setProperties({isVisible:!1,loadingReplies:!1,replies:[],filteredReplies:[]}),t.appEvents.has("canned-replies:show")||(this.showCanned=function(){return t.send("show")},t.appEvents.on("canned-replies:show",this,this.showCanned)),t.appEvents.has("canned-replies:hide")||(this.hideCanned=function(){return t.send("hide")},t.appEvents.on("canned-replies:hide",this,this.hideCanned)),t.addObserver("listFilter",function(){var n=t.listFilter.toLowerCase(),e=t.replies.map(function(e){return e.score=0,-1!==e.title.toLowerCase().indexOf(n)?e.score+=2:-1!==e.content.toLowerCase().indexOf(n)&&(e.score+=1),e}).filter(function(e){return 0!==e.score}).sort(function(e,n){return e.score!==n.score?e.score>n.score?-1:1:e.title!==n.title?e.title<n.title?-1:1:0});t.set("filteredReplies",e)})},teardownComponent:function(e){e.appEvents.has("canned-replies:show")&&this.showCanned&&(e.appEvents.off("canned-replies:show",this,this.showCanned),e.appEvents.off("canned-replies:hide",this,this.hideCanned))},actions:{show:function(){var n=this;$("#reply-control .d-editor-preview-wrapper > .d-editor-preview").hide(),this.setProperties({isVisible:!0,loadingReplies:!0}),(0,t.ajax)("/canned_replies").then(function(e){n.setProperties({replies:e.replies,filteredReplies:e.replies})}).catch(l.popupAjaxError).finally(function(){n.set("loadingReplies",!1),n.canEdit&&Ember.run.schedule("afterRender",function(){return document.querySelector(".canned-replies-filter").focus()})})},hide:function(){$(".d-editor-preview-wrapper > .d-editor-preview").show(),this.set("isVisible",!1)},newReply:function(){var e=(0,i.getOwner)(this).lookup("controller:composer");e.send("closeModal"),(0,n.default)("new-reply").set("newContent",e.model.reply)}}};e.default=s}),define("discourse/plugins/discourse-canned-replies/components/canned-reply",["exports","discourse/lib/show-modal","discourse/plugins/discourse-canned-replies/lib/apply-reply"],function(e,n,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=Ember.Component.extend({isOpen:!1,canEdit:!1,init:function(){this._super.apply(this,arguments);var e=this.get("currentUser"),n=this.get("siteSettings.canned_replies_everyone_enabled")&&this.get("siteSettings.canned_replies_everyone_can_edit"),e=this.get("siteSettings.canned_replies_enabled")&&e&&e.can_edit_canned_replies,n=e||n;this.set("canEdit",n)},actions:{toggle:function(){this.toggleProperty("isOpen")},apply:function(){var e=Discourse.__container__.lookup("controller:composer");(0,t.default)(this.get("reply.id"),this.get("reply.title"),this.get("reply.content"),e.model),this.appEvents.trigger("canned-replies:hide")},editReply:function(){var e=Discourse.__container__.lookup("controller:composer");e.send("closeModal"),(0,n.default)("edit-reply").setProperties({composerModel:e.composerModel,replyId:this.get("reply.id"),replyTitle:this.get("reply.title"),replyContent:this.get("reply.content")})}}});e.default=l}),define("discourse/plugins/discourse-canned-replies/components/canned-replies-form",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend({});e.default=n}),define("discourse/plugins/discourse-canned-replies/controllers/new-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,n,t,l,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r,o,c,d,p,i=Ember.Controller.extend(n.default,(n=(0,i.default)("newTitle","newContent"),a=i={newTitle:"",newContent:"",onShow:function(){this.setProperties({newTitle:"",newContent:""})},disableSaveButton:function(e,n){return""===e||""===n},actions:{save:function(){var e=this;(0,l.ajax)("/canned_replies",{type:"POST",data:{title:this.newTitle,content:this.newContent}}).then(function(){e.send("closeModal"),e.site.mobileView?(0,t.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(s.popupAjaxError)},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,t.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},r="disableSaveButton",o=[n],c=Object.getOwnPropertyDescriptor(i,"disableSaveButton"),d=i,p={},Object.keys(c).forEach(function(e){p[e]=c[e]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=o.slice().reverse().reduce(function(e,n){return n(a,r,e)||e},p),d&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(d):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(a,r,p),p=null),i));e.default=i}),define("discourse/plugins/discourse-canned-replies/controllers/edit-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error","I18n"],function(e,n,t,l,i,s,a){"use strict";var r;function o(t,l,e,n,i){var s={};return Object.keys(n).forEach(function(e){s[e]=n[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=e.slice().reverse().reduce(function(e,n){return n(t,l,e)||e},s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,l,s),s=null),s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i=Ember.Controller.extend(n.default,(r=(0,i.default)("saving"),n=(0,i.default)("replyTitle","replyContent","saving"),o(i={replyTitle:"",replyContent:"",replyId:"",saving:null,onShow:function(){this.set("saving",null)},savingLabel:function(e){return null===e?"save":e?"saving":"saved"},disableSaveButton:function(e,n,t){return t||""===e||""===n},actions:{save:function(){var e=this;this.set("saving",!0),(0,l.ajax)("/canned_replies/".concat(this.replyId),{type:"PATCH",data:{title:this.replyTitle,content:this.replyContent}}).catch(s.popupAjaxError).finally(function(){e.set("saving",!1),e.appEvents.trigger("canned-replies:show")})},remove:function(){var n=this;bootbox.confirm(a.default.t("canned_replies.edit.remove_confirm"),function(e){e&&(0,l.ajax)("/canned_replies/".concat(n.replyId),{type:"DELETE"}).then(function(){n.send("closeModal"),n.site.mobileView?(0,t.default)("canned-replies"):n.appEvents.trigger("canned-replies:show")}).catch(s.popupAjaxError)})},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,t.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},"savingLabel",[r],Object.getOwnPropertyDescriptor(i,"savingLabel"),i),o(i,"disableSaveButton",[n],Object.getOwnPropertyDescriptor(i,"disableSaveButton"),i),i));e.default=i}),define("discourse/plugins/discourse-canned-replies/controllers/canned-replies",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error","discourse/plugins/discourse-canned-replies/lib/apply-reply"],function(e,n,t,l,i,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o,c,d,p,u,i=Ember.Controller.extend(n.default,(n=(0,i.observes)("selectedReplyId"),r=i={selectedReply:null,selectedReplyId:"",loadingReplies:!0,init:function(){this._super.apply(this,arguments),this.replies=[]},_updateSelection:function(){this.selectionChange()},onShow:function(){var n=this;(0,l.ajax)("/canned_replies").then(function(e){n.set("replies",e.replies),n.selectionChange()}).catch(s.popupAjaxError).finally(function(){return n.set("loadingReplies",!1)})},selectionChange:function(){var n=this.get("selectedReplyId"),t="";this.get("replies").forEach(function(e){e.id===n&&(t=e)}),this.set("selectedReply",t)},actions:{apply:function(){(0,a.default)(this.get("selectedReplyId"),this.selectedReply.title,this.selectedReply.content,this.composerModel),this.send("closeModal")},newReply:function(){this.send("closeModal"),(0,t.default)("new-reply").set("newContent",this.composerModel.reply)},editReply:function(){this.send("closeModal"),(0,t.default)("edit-reply").setProperties({replyId:this.selectedReplyId,replyTitle:this.get("selectedReply.title"),replyContent:this.get("selectedReply.content")})}}},o="_updateSelection",c=[n],d=Object.getOwnPropertyDescriptor(i,"_updateSelection"),p=i,u={},Object.keys(d).forEach(function(e){u[e]=d[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=c.slice().reverse().reduce(function(e,n){return n(r,o,e)||e},u),p&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(p):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(r,o,u),u=null),i));e.default=i}),define("discourse/plugins/discourse-canned-replies/lib/apply-reply",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n,t,l){if(l){var i,s={my_username:l.get("user.username"),my_name:l.get("user.name"),original_poster_username:l.get("topic.details.created_by.username"),original_poster_name:l.get("topic.details.created_by.name"),reply_to_username:l.get("post.username"),reply_to_name:l.get("post.name"),last_poster_username:l.get("topic.last_poster_username"),reply_to_or_last_poster_username:l.get("post.username")||l.get("topic.last_poster_username")};for(i in s)t=s[i]?(n=n.replace(new RegExp("%{".concat(i,"(,fallback:.[^}]*)?}"),"g"),s[i]),t.replace(new RegExp("%{".concat(i,"(,fallback:.[^}]*)?}"),"g"),s[i])):(n=(n=n.replace(new RegExp("%{".concat(i,",fallback:(.[^}]*)}"),"g"),"$1")).replace(new RegExp("%{".concat(i,"}"),"g"),""),(t=t.replace(new RegExp("%{".concat(i,",fallback:(.[^}]*)}"),"g"),"$1")).replace(new RegExp("%{".concat(i,"}"),"g"),""))}l.appEvents.trigger("composer:insert-block",t),l&&!l.title&&l.set("title",n);(0,a.ajax)("/canned_replies/".concat(e,"/use"),{type:"PATCH"}).catch(r.popupAjaxError)}});
//# sourceMappingURL=https://sjc6.discourse-cdn.com/nvidia/assets/plugins/discourse-canned-replies-3b950b5a0a00aa72b393bc064fcee0c1d7af946e23a55ebfeba89c87fd59adc5.js.map